---------------------------------------------------------------
КОНСОЛЬ ЗАПРОСОВ ДЛЯ УПРАВЛЯЕМЫХ ФОРМ 8.3 (СДРКонсольЗапросовХ)
---------------------------------------------------------------

----------------------------------------------------
Платформа ...... 8.3.8 и выше (управляемые формы)
Конфигурация ... любая (БСП не требуется)
Клиент ......... толстый, тонкий, web-клиент
Описание ....... https://infostart.ru/public/938606/
----------------------------------------------------

--- КРАТКАЯ СПРАВОЧНАЯ ИНФОРМАЦИЯ ---

1. ПАРАМЕТРЫ ЗАПРОСА
--------------------
1.1 Параметры делятся на обычные и спец. параметры, которые обрабатываются особо.
	Типы спец. параметров: "Таблица значений", "Граница", "Момент времени", "Уникальный идентификатор" и "Выражение".

1.2 Список параметров запроса - это таблица значений с колонками:
	"Это спец значение" - истина, для спец. параметров
	"Имя" - имя параметра
	"Значение" - значение параметра (строковое представление значения параметра)
	"Тип значения" - показывает тип спец. параметра

1.3 Значение спец. параметра типа "Выражение" представляет собой выражение на языке 1С, которое вычисляется перед выполнением запроса.
	В выражении можно обращаться к другим параметрам через переменную "Параметры", на пример: "НачалоГода(Параметры.ДатаРасчета)", где
	ДатаРасчета - это имя параметра типа "Дата".

1.4 Обычный параметр можно преобразовать в "Список значений", который затем можно преобразовать в обычный параметр.

1.5 Команды преобразования типа параметра располагаются в группе "Изменить тип параметра" и контекстном меню.

1.6 В значение параметра запроса можно вставить битую ссылку (ссылку на удаленный объект) - есть команда "Добавить битую ссылку"

1.7 Часть или все параметры запроса можно скопировать в другой запрос - см. группу команд "Буфер обмена".


2. ВЫВОД РЕЗУЛЬТАТОВ ЗАПРОСА
----------------------------
2.1 Результаты запросов выводятся тремя способами:

	"Таблица значений" - показываются только результаты последнего запроса из пакета
	
	"Таблица значений + размеры временных таблиц" - показываются результаты всех запросов из пакета,
	число записей во временных таблицах и сами временные таблицы.
	При этом во временных таблицах отображается не больше одной записи.
	
	"Таблица значений + временные таблицы" - показываются результаты всех запросов из пакета,
	число записей во временных таблицах и сами временные таблицы.
	При этом максимальное количество отображаемых записей во временных таблицах определяется значением, заданным в поле "Макс. размер ВТ".
	Если "Макс. размер ВТ" равен нулю, то отображаются все записи.

2.2 Результат последнего запроса из пакета в зависимости от "Способа выгрузки" представляется в виде "Таблицы значений" или "Дерева значений".
	Внутренние запросы пакета и временные таблицы выгружаются только в виде "Таблицы значений".

2.3 Пример запроса для вывода уникального идентификатора в результатах:
	ВЫБРАТЬ
		т.Номенклатура КАК Номенклатура,
		т.Номенклатура КАК Номенклатура__GUID__, // в этом поле будет GUID номенклатуры
		т.Количество КАК Количество,
		...


3. СОХРАНЕНИЕ ЗАПРОСА ИЗ ОТЛАДЧИКА
----------------------------------
3.1 Сохранение запроса с помощью функции общего модуля
	- текст и описание функции для формирования описания запроса можно получить, выполнив команду "Процедура общего модуля для перехвата запроса",
	  расположенную на закладке "Настройки"
	- данную функцию необходимо разместить в общем серверном модуле (необходимо изменение конфигурации или подключение расширения)
	- необходимо остановиться в отладчике на строке кода выполнения интересующего запроса
	- выполнить по Shift+F9 вызов этой функции, которая сохранит описание запроса в указанный файл на СЕРВЕРЕ или вернет XML-представление запроса
	- в случае получения XML-представления запроса, его надо скопировать в буфер обмена, а затем в консоли выполнить команду "XML -> Запрос" и запрос
	  подгрузится в консоль (в конфигураторе есть ограничение на длину строки, возвращаемую командой Shift+F9, поэтому большие запросы перехватитиь так нельзя)
	  пример вызова: _омОтладка.СохранитьЗапросДляСДРКонсолиХ(Запрос) - возвращает XML-представление запроса
	- в случае сохранения описания запроса в файл, этот файл следует затем подгрузить в консоль, выполнив команду "Подгрузить запрос из файла..." по правому клику
	  мышки в дереве запросов
	  пример вызова: _омОтладка.СохранитьЗапросДляСДРКонсолиХ(Запрос, "D:\1Cv8\Запросы\000") - сохраняет запрос в файл (НА СЕРВЕРЕ)

3.2 Сохранение запроса с помощью самой обработки
	- данный способ применим если обработка СДРКонсольЗапросовХ встроена в конфигурацию или открывается в режиме предприятия через меню "Файл"
	  если обработка открывается как внешняя, то в настройках пользователя должна быть отключена "Защита от опасных действий"
	- в консоли выполнить команду "Сформировать код для перехвата запроса..." - она сформирует код, который затем будем выполнять в отладчике
	  пример кода: ВнешниеОбработки.Создать("C:\Users\USR1CV8\AppData\Local\Temp\СДРКонсольЗапросвХ-1.1.0.59.epf", ложь).вСохранитьЗапрос(2586257503, Запрос)
	- необходимо остановиться в отладчике на строке кода выполнения интересующего запроса
	- выполнить по Shift+F9 код, сформированный для перехвата запроса, который сохранит описание запроса во временный файл на СЕРВЕРЕ или вернет XML-представление запроса
	- в случае получения XML-представления запроса, его надо скопировать в буфер обмена, а затем в консоли выполнить команду "XML -> Запрос" и запрос
	  подгрузится в консоль (в конфигураторе есть ограничение на длину строки, возвращаемую командой Shift+F9, поэтому большие запросы перехватитиь так нельзя)
	- в случае сохранения описания запроса в файл, этот файл следует затем подгрузить в консоль, выполнив команду "Подгрузить перехваченные запросы"
	  (после загрузки запросов в консоль временные файлы описаний запросов удаляются)
	- в отладчике можно сохранить описания нескольких запросов (имена файлов обработка формирует самостоятельно)
